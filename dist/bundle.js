/*! For license information please see bundle.js.LICENSE.txt */
(()=>{var t={843:function(t,e,r){function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}var o=this;function a(){"use strict";a=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,o=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var a=e&&e.prototype instanceof d?e:d,i=Object.create(a.prototype),s=new F(n||[]);return o(i,"_invoke",{value:k(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function d(){}function v(){}function y(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(N([])));w&&w!==e&&r.call(w,s)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function a(o,i,s,c){var u=p(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){a("next",t,s,c)}),(function(t){a("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return a("throw",t,s,c)}))}c(u.arg)}var i;o(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){a(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function C(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=y,o(b,"constructor",{value:y,configurable:!0}),o(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function i(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var s,c,u=r(555).sendCommand,l={type:null,getType:(s=a().mark((function t(){var e;return a().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!o.type){t.next=6;break}if("libev"!==o.type&&"python"!==o.type){t.next=5;break}return t.abrupt("return",o.type);case 5:throw new Error("Unknown shadowsocks type");case 6:return t.next=8,u("ping");case 8:if("stat:"!==(e=t.sent).substr(0,5)){t.next=14;break}return o.type="libev",t.abrupt("return",o.type);case 14:if("pong"!==e.substr(0,5)){t.next=19;break}return o.type="libev",t.abrupt("return",o.type);case 19:throw new Error("ShadowsocksType.getType, received unknown message");case 20:case"end":return t.stop()}}),t)})),c=function(){var t=this,e=arguments;return new Promise((function(r,n){var o=s.apply(t,e);function a(t){i(o,r,n,a,c,"next",t)}function c(t){i(o,r,n,a,c,"throw",t)}a(void 0)}))},function(){return c.apply(this,arguments)})},f={commandKeywords:{libev:{ping:"ping",getAllPorts:"list",getAllTraffic:"ping",add:"add",remove:"remove"},python:{ping:"ping",getAllPorts:"",getAllTraffic:"",add:"add",remove:"remove"}},getCommandKeyword:function(t,e){if("libev"!==t&&"python"!==t)throw new Error("illegal argument");if("ping"!==e&&"getAllPorts"!==e&&"getAllTraffic"!==e&&"add"!==e&&"remove"!==e)throw new Error("illegal argument");return this.commandKeywords[t][e]}};t.exports={encryptionMethods:["aes-128-gcm","aes-192-gcm","aes-256-gcm","aes-128-cfb","aes-192-cfb","aes-256-cfb","aes-128-ctr","aes-192-ctr","aes-256-ctr","camellia-128-cfb","camellia-192-cfb","camellia-256-cfb","bf-cfb","chacha20-ietf-poly1305","xchacha20-ietf-poly1305","salsa20","chacha20","chacha20-ietf"],ProtocolTypes:l,$:f}},741:(t,e,r)=>{var n=r(147),o=r(17),a=r(564),i=r(843).encryptionMethods,s=(r(158)("dao"),o.resolve(__dirname,"./ports.json")),c={ports:[],getPorts:function(){return this.ports},setPorts:function(t){if(!t||!Array.isArray(t))throw new Error("Illegal argument");t.forEach((function(t){var e=t.port,r=t.password,n=t.method;if(!e||!Number.isInteger(e)||e<1||e>65535)throw new Error("Illegal argument, port illegal");if(!r||"string"!=typeof r||r.length<1)throw new Error("Illegal argument, password illegal");if(!n||"string"!=typeof n||!a.isIn(n,i))throw new Error("Illegal argument")}));var e=t.map((function(t){return t.port}));if(new Set(e).size!==e.length)throw new Error("Illegal argument, duplicate ports");this.ports=JSON.parse(JSON.stringify(t))},addPort:function(t){if(!t)throw new Error("Illegal argument");var e=t.port,r=t.password,n=t.method;if(!e||!Number.isInteger(e)||e<1||e>65535)throw new Error("Illegal argument");if(!r||"string"!=typeof r||r.length<1)throw new Error("Illegal argument");if(!n||"string"!=typeof n||!a.isIn(n,i))throw new Error("Illegal argument");if(this.ports.some((function(t){return t.port===e})))throw new Error("Port already exists in database");this.ports.push({port:e,password:r,method:n}),this.savePortsToFile()},removePort:function(t){if(isNaN(t)||!Number.isInteger(t)||t<1||t>65535)throw new Error("Illegal argument");this.ports=this.ports.filter((function(e){return e.port!==t})),this.savePortsToFile()},initPortsFromFile:function(){try{var t=n.readFileSync(s,"utf8");t&&this.setPorts(JSON.parse(t))}catch(t){n.openSync(s,"w")}},savePortsToFile:function(){n.writeFile(s,JSON.stringify(this.ports),(function(t){if(t)throw t}))}};c.initPortsFromFile(),t.exports.addPort=function(t){c.addPort(t)},t.exports.removePort=function(t){c.removePort(t)},t.exports.getAllPorts=function(){return c.getPorts()}},555:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){"use strict";o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),s=new F(n||[]);return a(i,"_invoke",{value:k(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function d(){}function v(){}function y(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(N([])));w&&w!==e&&r.call(w,s)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(a,i,s,c){var u=p(t[a],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,c)}),(function(t){o("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return o("throw",t,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function C(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function a(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var i=r(17),s=r(394),c=r(475),u=i.resolve(__dirname,"/tmp/manager.sock"),l=i.resolve(__dirname,"/tmp/controller.sock"),f=r(727),p=c.createSocket("unix_dgram"),h=new s;function d(t){try{return JSON.parse(t),!0}catch(t){return!1}}var v=function(){var t,e=(t=o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e)||!Number.isInteger(e)||e<1||e>65535)){t.next=2;break}throw new Error("illegal argument");case 2:return t.next=4,f.test(e);case 4:return r=t.sent,t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})),function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function s(t){a(i,n,o,s,c,"next",t)}function c(t){a(i,n,o,s,c,"throw",t)}s(void 0)}))});return function(t){return e.apply(this,arguments)}}();t.exports={controllerPath:l,sendCommand:function(t){if(!t||"string"!=typeof t)throw new Error("Illegal argument");if("ping"!==t&&"list"!==t&&"add: "!==t.substr(0,5)&&"remove: "!==t.substr(0,8))throw new Error("Illegal argument");if("add: "===t.substr(0,5)){var e=t.substr(5);if(!d(e))throw new Error("Illegal argument");var r=JSON.parse(e),n=r.server_port,o=r.password;if(!Number.isInteger(n)||n<1||n>65535||"string"!=typeof o||o.length<1)throw new Error("Illegal argument")}if("remove: "===t.substr(0,8)){var a=t.substr(8);if(!d(a))throw new Error("Illegal argument");var i=JSON.parse(a).server_port;if(!Number.isInteger(i)||i<1||i>65535)throw new Error("Illegal argument")}return h.acquire("key",(function(){return new Promise((function(e,r){var n=!1;p.once("message",(function(t){n=!0,e(String(t))}));try{var o=Buffer.from(t);p.send(o,0,o.length,u,(function(t){if(t)throw new Error("Shadowsocks unreachable"+t)}))}catch(t){throw p.removeAllListeners("message"),t}setTimeout((function(){n||(p.removeAllListeners("message"),r(new Error("Shadowsocks no response")))}),1e3)}))}),{})},socket:p,getPortAvailable:v}},570:(t,e,r)=>{function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function o(){"use strict";o=function(){return t};var t={},e=Object.prototype,r=e.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),s=new F(n||[]);return a(i,"_invoke",{value:k(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}t.wrap=f;var h={};function d(){}function v(){}function y(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(N([])));w&&w!==e&&r.call(w,s)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(t,e){function o(a,i,s,c){var u=p(t[a],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==n(f)&&r.call(f,"__await")?e.resolve(f.__await).then((function(t){o("next",t,s,c)}),(function(t){o("throw",t,s,c)})):e.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return o("throw",t,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(t,r){function n(){return new e((function(e,n){o(t,r,e,n)}))}return i=i?i.then(n,n):n()}})}function k(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function C(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var n=-1,o=function e(){for(;++n<t.length;)if(r.call(t,n))return e.value=t[n],e.done=!1,e;return e.value=void 0,e.done=!0,e};return o.next=o}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},t.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,(function(){return this})),t.AsyncIterator=E,t.async=function(e,r,n,o,a){void 0===a&&(a=Promise);var i=new E(f(e,r,n,o),a);return t.isGeneratorFunction(r)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),t.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},t.values=N,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&r.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function n(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var o=this.tryEntries.length-1;o>=0;--o){var a=this.tryEntries[o],i=a.completion;if("root"===a.tryLoc)return n("end");if(a.tryLoc<=this.prev){var s=r.call(a,"catchLoc"),c=r.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return n(a.catchLoc,!0);if(this.prev<a.finallyLoc)return n(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return n(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return n(a.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},t}function a(t,e){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=function(t,e){if(t){if("string"==typeof t)return i(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?i(t,e):void 0}}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return s=t.done,t},e:function(t){c=!0,a=t},f:function(){try{s||null==r.return||r.return()}finally{if(c)throw a}}}}function i(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function s(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}function c(t){return function(){var e=this,r=arguments;return new Promise((function(n,o){var a=t.apply(e,r);function i(t){s(a,n,o,i,c,"next",t)}function c(t){s(a,n,o,i,c,"throw",t)}i(void 0)}))}}var u=r(147),l=r(564),f=(r(158)("service"),r(741)),p=r(843),h=p.$,d=p.ProtocolTypes,v=p.encryptionMethods,y=r(555),m=y.sendCommand,g=y.socket,w=y.controllerPath,b=y.getPortAvailable;function x(){return(x=c(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.getAllPorts();case 3:return t.sent,t.next=6,m("ping");case 6:if("shadowsocks unreachable"!==(e=t.sent)){t.next=10;break}t.next=15;break;case 10:if("shadowsocks no response"!==e){t.next=13;break}t.next=15;break;case 13:return t.next=15,E();case 15:t.next=20;break;case 17:throw t.prev=17,t.t0=t.catch(0),t.t0;case 20:case"end":return t.stop()}}),t,null,[[0,17]])})))).apply(this,arguments)}var E=function(){var t=c(o().mark((function t(){var e,r,n,i,s,c,u,l,p;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,f.getAllPorts();case 3:return e=t.sent,t.next=6,O();case 6:r=t.sent,n=r.map((function(t){return t.port})),i=a(e),t.prev=9,i.s();case 11:if((s=i.n()).done){t.next=18;break}if(c=s.value,n.includes(c.port)){t.next=16;break}return t.next=16,C(c);case 16:t.next=11;break;case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(9),i.e(t.t0);case 23:return t.prev=23,i.f(),t.finish(23);case 26:u=a(r),t.prev=27,p=o().mark((function t(){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=l.value,e.find((function(t){return t.port===r.port}))){t.next=4;break}return t.next=4,N(r.port);case 4:case"end":return t.stop()}}),t)})),u.s();case 30:if((l=u.n()).done){t.next=34;break}return t.delegateYield(p(),"t1",32);case 32:t.next=30;break;case 34:t.next=39;break;case 36:t.prev=36,t.t2=t.catch(27),u.e(t.t2);case 39:return t.prev=39,u.f(),t.finish(39);case 42:t.next=48;break;case 44:if(t.prev=44,t.t3=t.catch(0),"shadowsocks unreachable"===t.t3.message||"shadowsocks no response"===t.t3.message){t.next=48;break}throw t.t3;case 48:case"end":return t.stop()}}),t,null,[[0,44],[9,20,23,26],[27,36,39,42]])})));return function(){return t.apply(this,arguments)}}(),k=function(){var t=c(o().mark((function t(e){var r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("illegal argument");case 2:if(r=e.port,n=e.password,a=e.method,!(!r||!Number.isInteger(r)||r<1||r>65535)){t.next=5;break}throw new Error("illegal argument");case 5:if(n&&"string"==typeof n&&!(n.length<1)){t.next=7;break}throw new Error("illegal argument");case 7:if(a&&"string"==typeof a&&l.isIn(a,v)){t.next=9;break}throw new Error("illegal argument");case 9:return t.next=11,C({port:r,password:n,method:a});case 11:return t.next=13,f.addPort({port:r,password:n,method:a});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),C=function(){var t=c(o().mark((function t(e){var r,n,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("illegal argument");case 2:if(r=e.port,n=e.password,a=e.method,!(!r||!Number.isInteger(r)||r<1||r>65535)){t.next=5;break}throw new Error("illegal argument");case 5:if(n&&"string"==typeof n&&!(n.length<1)){t.next=7;break}throw new Error("illegal argument");case 7:if(a&&"string"==typeof a&&l.isIn(a,v)){t.next=9;break}throw new Error("illegal argument");case 9:return t.next=11,A(r);case 11:if(!t.sent){t.next=14;break}throw new Error("port already exists from shadowsocks");case 14:return t.next=16,b(r);case 16:if(t.sent){t.next=19;break}throw new Error("port not available from operating system");case 19:return t.next=21,d.getType();case 21:if("libev"!==(i=t.sent)){t.next=27;break}return t.next=25,T({port:r,password:n,method:a});case 25:case 30:t.next=33;break;case 27:if("python"!==i){t.next=32;break}return t.next=30,j({port:r,password:n});case 32:throw new Error("should not come here");case 33:return t.next=35,A(r);case 35:if(t.sent){t.next=38;break}throw new Error("shadowsocks failed adding port");case 38:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),O=function(){var t=c(o().mark((function t(){var e,r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.getType();case 2:if("libev"!==(e=t.sent)){t.next=10;break}return t.next=6,S();case 6:return r=t.sent,t.abrupt("return",r);case 10:if("python"!==e){t.next=17;break}return t.next=13,getAllPortsFromPython();case 13:return n=t.sent,t.abrupt("return",n);case 17:throw new Error("should not come here");case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),L=function(){var t=c(o().mark((function t(){var e,r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.getType();case 2:if("libev"!==(e=t.sent)){t.next=10;break}return t.next=6,I();case 6:return r=t.sent,t.abrupt("return",r);case 10:if("python"!==e){t.next=17;break}return t.next=13,getAllTrafficFromPython();case 13:return n=t.sent,t.abrupt("return",n);case 17:throw new Error("should not come here");case 18:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),F=function(){var t=c(o().mark((function t(){var e;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.getType();case 2:if("libev"!==(e=t.sent)){t.next=8;break}return t.next=6,_();case 6:case 11:t.next=14;break;case 8:if("python"!==e){t.next=13;break}return t.next=11,P();case 13:throw new Error("should not come here");case 14:return t.abrupt("return",{pong:"pong"});case 15:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),N=function(){var t=c(o().mark((function t(e){var r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e)||!Number.isInteger(e)||e<1||e>65535)){t.next=2;break}throw new Error("illegal argument");case 2:return t.next=4,d.getType();case 4:if("libev"!==(r=t.sent)){t.next=10;break}return t.next=8,R(e);case 8:case 13:t.next=16;break;case 10:if("python"!==r){t.next=15;break}return t.next=13,G(e);case 15:throw new Error("should not come here");case 16:return t.next=18,A(e);case 18:if(!t.sent){t.next=21;break}throw new Error("shadowsocks failed removing port");case 21:return t.next=23,b(e);case 23:if(t.sent){t.next=26;break}throw new Error("operating system failed removing port");case 26:return t.next=28,f.removePort(e);case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(){var t=c(o().mark((function t(){var e,r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.getCommandKeyword("libev","ping"),t.next=3,m(e);case 3:if("stat:"!==(r=t.sent).substr(0,5)){t.next=9;break}return n=JSON.parse(r.substr(5)),t.abrupt("return",n);case 9:throw new Error("pingLibev, received unknown message");case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),P=function(){var t=c(o().mark((function t(){var e,r;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.getCommandKeyword("python","ping"),t.next=3,m(e);case 3:if("pong"!==(r=t.sent).substr(0,4)){t.next=8;break}return t.abrupt("return",r);case 8:throw new Error("pingPython, received unknown message");case 9:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),S=function(){var t=c(o().mark((function t(){var e,r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.getCommandKeyword("libev","getAllPorts"),t.next=3,m(e);case 3:if(r=t.sent,n=[],"[\n"!==r.substr(0,2)){t.next=10;break}a=JSON.parse(r),n=a.map((function(t){return{port:Number(t.server_port),password:t.password,method:t.method}})),t.next=12;break;case 10:if("\n]"===r.substr(0,2)){t.next=12;break}throw new Error("getAllPortsFromLibev, received unknown message");case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),I=function(){var t=c(o().mark((function t(){var e,r,n,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=h.getCommandKeyword("libev","getAllTraffic"),t.next=3,m(e);case 3:if(r=t.sent,n={},"stat:"!==r.substr(0,5)){t.next=11;break}a=JSON.parse(r.substr(5)),i=Object.keys(a),n=i.map((function(t){return{port:Number(t),traffic:Number(a[t])}})),t.next=12;break;case 11:throw new Error("getAllTrafficFromLibev, received unknown message");case 12:return t.abrupt("return",n);case 13:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),T=function(){var t=c(o().mark((function t(e){var r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e||"object"!==n(e)||!e.hasOwnProperty("port")||!e.hasOwnProperty("password")||isNaN(e.port)||!Number.isInteger(e.port)||e.port<1||e.port>65535||"string"!=typeof e.password||e.password.length<1)){t.next=2;break}throw new Error("illegal argument");case 2:return r=h.getCommandKeyword("libev","add"),a=r+": "+JSON.stringify({server_port:e.port,password:e.password,method:e.method}),t.next=6,m(a);case 6:if("ok"!==(i=t.sent).substr(0,2)){t.next=11;break}return t.abrupt("return");case 11:if("err"!==i.substr(0,3)){t.next=15;break}throw new Error("illegal command");case 15:throw new Error("sendAddToLibev, received unknown message: "+i);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),j=function(){var t=c(o().mark((function t(e){var r,a,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(!e||"object"!==n(e)||!e.hasOwnProperty("port")||!e.hasOwnProperty("password")||isNaN(e.port)||!Number.isInteger(e.port)||e.port<1||e.port>65535||"string"!=typeof e.password||e.password.length<1)){t.next=2;break}throw new Error("illegal argument");case 2:return r=h.getCommandKeyword("python","add"),a=r+": "+JSON.stringify({server_port:e.port,password:e.password}),t.next=6,m(a);case 6:if("ok"!==(i=t.sent).substr(0,2)){t.next=11;break}return t.abrupt("return");case 11:if("err"!==i.substr(0,3)){t.next=15;break}throw new Error("illegal command");case 15:throw new Error("sendAddToPython, received unknown message: "+i);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),A=function(){var t=c(o().mark((function t(e){var r,n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e)||!Number.isInteger(e)||e<1||e>65535)){t.next=2;break}throw new Error("illegal argument");case 2:return t.next=4,O();case 4:return r=t.sent,n=r.map((function(t){return t.port})),t.abrupt("return",n.includes(e));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),R=function(){var t=c(o().mark((function t(e){var r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e)||!Number.isInteger(e)||e<1||e>65535)){t.next=2;break}throw new Error("illegal argument");case 2:return r=h.getCommandKeyword("libev","remove"),n=r+": "+JSON.stringify({server_port:e}),t.next=6,m(n);case 6:if("ok"!==(a=t.sent).substr(0,2)){t.next=11;break}return t.abrupt("return");case 11:if("err"!==a.substr(0,3)){t.next=15;break}throw new Error("illegal command");case 15:throw new Error("sendRemoveFromLibev, received unknown message: "+a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),G=function(){var t=c(o().mark((function t(e){var r,n,a;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(isNaN(e)||!Number.isInteger(e)||e<1||e>65535)){t.next=2;break}throw new Error("illegal argument");case 2:return r=h.getCommandKeyword("python","remove"),n=r+": "+JSON.stringify({server_port:e}),t.next=6,m(n);case 6:if("ok"!==(a=t.sent).substr(0,2)){t.next=11;break}return t.abrupt("return");case 11:if("err"!==a.substr(0,3)){t.next=15;break}throw new Error("illegal command");case 15:throw new Error("sendRemoveFromPython, received unknown message: "+a);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}();u.existsSync(w)&&u.unlinkSync(w),g.bind(w),g.on("error",(function(t){throw new Error("Client on error, shadowsocks error: "+t)})),function(){x.apply(this,arguments)}(),t.exports={addPort:k,getAllPorts:O,getAllTraffic:L,ping:F,removePort:N}},435:t=>{var e=1e3,r=60*e,n=60*r,o=24*n;function a(t,e,r,n){var o=e>=1.5*r;return Math.round(t/r)+" "+n+(o?"s":"")}t.exports=function(t,i){i=i||{};var s,c,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var a=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(a){var i=parseFloat(a[1]);switch((a[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*i;case"weeks":case"week":case"w":return 6048e5*i;case"days":case"day":case"d":return i*o;case"hours":case"hour":case"hrs":case"hr":case"h":return i*n;case"minutes":case"minute":case"mins":case"min":case"m":return i*r;case"seconds":case"second":case"secs":case"sec":case"s":return i*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return i;default:return}}}}(t);if("number"===u&&isFinite(t))return i.long?(s=t,(c=Math.abs(s))>=o?a(s,c,o,"day"):c>=n?a(s,c,n,"hour"):c>=r?a(s,c,r,"minute"):c>=e?a(s,c,e,"second"):s+" ms"):function(t){var a=Math.abs(t);return a>=o?Math.round(t/o)+"d":a>=n?Math.round(t/n)+"h":a>=r?Math.round(t/r)+"m":a>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},227:(t,e,r)=>{e.formatArgs=function(e){if(e[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+e[0]+(this.useColors?"%c ":" ")+"+"+t.exports.humanize(this.diff),!this.useColors)return;const r="color: "+this.color;e.splice(1,0,r,"color: inherit");let n=0,o=0;e[0].replace(/%[a-zA-Z%]/g,(t=>{"%%"!==t&&(n++,"%c"===t&&(o=n))})),e.splice(o,0,r)},e.save=function(t){try{t?e.storage.setItem("debug",t):e.storage.removeItem("debug")}catch(t){}},e.load=function(){let t;try{t=e.storage.getItem("debug")}catch(t){}return!t&&"undefined"!=typeof process&&"env"in process&&(t=process.env.DEBUG),t},e.useColors=function(){return!("undefined"==typeof window||!window.process||"renderer"!==window.process.type&&!window.process.__nwjs)||("undefined"==typeof navigator||!navigator.userAgent||!navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))&&("undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||"undefined"!=typeof window&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/))},e.storage=function(){try{return localStorage}catch(t){}}(),e.destroy=(()=>{let t=!1;return()=>{t||(t=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),e.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"],e.log=console.debug||console.log||(()=>{}),t.exports=r(447)(e);const{formatters:n}=t.exports;n.j=function(t){try{return JSON.stringify(t)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}}},447:(t,e,r)=>{t.exports=function(t){function e(t){let r,o,a,i=null;function s(...t){if(!s.enabled)return;const n=s,o=Number(new Date),a=o-(r||o);n.diff=a,n.prev=r,n.curr=o,r=o,t[0]=e.coerce(t[0]),"string"!=typeof t[0]&&t.unshift("%O");let i=0;t[0]=t[0].replace(/%([a-zA-Z%])/g,((r,o)=>{if("%%"===r)return"%";i++;const a=e.formatters[o];if("function"==typeof a){const e=t[i];r=a.call(n,e),t.splice(i,1),i--}return r})),e.formatArgs.call(n,t),(n.log||e.log).apply(n,t)}return s.namespace=t,s.useColors=e.useColors(),s.color=e.selectColor(t),s.extend=n,s.destroy=e.destroy,Object.defineProperty(s,"enabled",{enumerable:!0,configurable:!1,get:()=>null!==i?i:(o!==e.namespaces&&(o=e.namespaces,a=e.enabled(t)),a),set:t=>{i=t}}),"function"==typeof e.init&&e.init(s),s}function n(t,r){const n=e(this.namespace+(void 0===r?":":r)+t);return n.log=this.log,n}function o(t){return t.toString().substring(2,t.toString().length-2).replace(/\.\*\?$/,"*")}return e.debug=e,e.default=e,e.coerce=function(t){return t instanceof Error?t.stack||t.message:t},e.disable=function(){const t=[...e.names.map(o),...e.skips.map(o).map((t=>"-"+t))].join(",");return e.enable(""),t},e.enable=function(t){let r;e.save(t),e.namespaces=t,e.names=[],e.skips=[];const n=("string"==typeof t?t:"").split(/[\s,]+/),o=n.length;for(r=0;r<o;r++)n[r]&&("-"===(t=n[r].replace(/\*/g,".*?"))[0]?e.skips.push(new RegExp("^"+t.slice(1)+"$")):e.names.push(new RegExp("^"+t+"$")))},e.enabled=function(t){if("*"===t[t.length-1])return!0;let r,n;for(r=0,n=e.skips.length;r<n;r++)if(e.skips[r].test(t))return!1;for(r=0,n=e.names.length;r<n;r++)if(e.names[r].test(t))return!0;return!1},e.humanize=r(435),e.destroy=function(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")},Object.keys(t).forEach((r=>{e[r]=t[r]})),e.names=[],e.skips=[],e.formatters={},e.selectColor=function(t){let r=0;for(let e=0;e<t.length;e++)r=(r<<5)-r+t.charCodeAt(e),r|=0;return e.colors[Math.abs(r)%e.colors.length]},e.enable(e.load()),e}},158:(t,e,r)=>{"undefined"==typeof process||"renderer"===process.type||!0===process.browser||process.__nwjs?t.exports=r(227):t.exports=r(39)},39:(t,e,r)=>{const n=r(224),o=r(837);e.init=function(t){t.inspectOpts={};const r=Object.keys(e.inspectOpts);for(let n=0;n<r.length;n++)t.inspectOpts[r[n]]=e.inspectOpts[r[n]]},e.log=function(...t){return process.stderr.write(o.format(...t)+"\n")},e.formatArgs=function(r){const{namespace:n,useColors:o}=this;if(o){const e=this.color,o="[3"+(e<8?e:"8;5;"+e),a=`  ${o};1m${n} [0m`;r[0]=a+r[0].split("\n").join("\n"+a),r.push(o+"m+"+t.exports.humanize(this.diff)+"[0m")}else r[0]=(e.inspectOpts.hideDate?"":(new Date).toISOString()+" ")+n+" "+r[0]},e.save=function(t){t?process.env.DEBUG=t:delete process.env.DEBUG},e.load=function(){return process.env.DEBUG},e.useColors=function(){return"colors"in e.inspectOpts?Boolean(e.inspectOpts.colors):n.isatty(process.stderr.fd)},e.destroy=o.deprecate((()=>{}),"Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."),e.colors=[6,2,3,4,5,1];try{const t=r(130);t&&(t.stderr||t).level>=2&&(e.colors=[20,21,26,27,32,33,38,39,40,41,42,43,44,45,56,57,62,63,68,69,74,75,76,77,78,79,80,81,92,93,98,99,112,113,128,129,134,135,148,149,160,161,162,163,164,165,166,167,168,169,170,171,172,173,178,179,184,185,196,197,198,199,200,201,202,203,204,205,206,207,208,209,214,215,220,221])}catch(t){}e.inspectOpts=Object.keys(process.env).filter((t=>/^debug_/i.test(t))).reduce(((t,e)=>{const r=e.substring(6).toLowerCase().replace(/_([a-z])/g,((t,e)=>e.toUpperCase()));let n=process.env[e];return n=!!/^(yes|on|true|enabled)$/i.test(n)||!/^(no|off|false|disabled)$/i.test(n)&&("null"===n?null:Number(n)),t[r]=n,t}),{}),t.exports=r(447)(e);const{formatters:a}=t.exports;a.o=function(t){return this.inspectOpts.colors=this.useColors,o.inspect(t,this.inspectOpts).split("\n").map((t=>t.trim())).join(" ")},a.O=function(t){return this.inspectOpts.colors=this.useColors,o.inspect(t,this.inspectOpts)}},560:t=>{"use strict";t.exports=(t,e=process.argv)=>{const r=t.startsWith("-")?"":1===t.length?"-":"--",n=e.indexOf(r+t),o=e.indexOf("--");return-1!==n&&(-1===o||n<o)}},130:(t,e,r)=>{"use strict";const n=r(37),o=r(224),a=r(560),{env:i}=process;let s;function c(t,e={}){return 0!==(r=function(t,{streamIsTTY:e,sniffFlags:r=!0}={}){const o=function(){if("FORCE_COLOR"in i)return"true"===i.FORCE_COLOR?1:"false"===i.FORCE_COLOR?0:0===i.FORCE_COLOR.length?1:Math.min(Number.parseInt(i.FORCE_COLOR,10),3)}();void 0!==o&&(s=o);const c=r?s:o;if(0===c)return 0;if(r){if(a("color=16m")||a("color=full")||a("color=truecolor"))return 3;if(a("color=256"))return 2}if(t&&!e&&void 0===c)return 0;const u=c||0;if("dumb"===i.TERM)return u;if("win32"===process.platform){const t=n.release().split(".");return Number(t[0])>=10&&Number(t[2])>=10586?Number(t[2])>=14931?3:2:1}if("CI"in i)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI","GITHUB_ACTIONS","BUILDKITE","DRONE"].some((t=>t in i))||"codeship"===i.CI_NAME?1:u;if("TEAMCITY_VERSION"in i)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(i.TEAMCITY_VERSION)?1:0;if("truecolor"===i.COLORTERM)return 3;if("TERM_PROGRAM"in i){const t=Number.parseInt((i.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(i.TERM_PROGRAM){case"iTerm.app":return t>=3?3:2;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(i.TERM)?2:/^screen|^xterm|^vt100|^vt220|^rxvt|color|ansi|cygwin|linux/i.test(i.TERM)||"COLORTERM"in i?1:u}(t,{streamIsTTY:t&&t.isTTY,...e}))&&{level:r,hasBasic:!0,has256:r>=2,has16m:r>=3};var r}a("no-color")||a("no-colors")||a("color=false")||a("color=never")?s=0:(a("color")||a("colors")||a("color=true")||a("color=always"))&&(s=1),t.exports={supportsColor:c,stdout:c({isTTY:o.isatty(1)}),stderr:c({isTTY:o.isatty(2)})}},394:t=>{"use strict";t.exports=require("async-lock")},727:t=>{"use strict";t.exports=require("portastic")},87:t=>{"use strict";t.exports=require("socket.io-client")},475:t=>{"use strict";t.exports=require("unix-dgram")},564:t=>{"use strict";t.exports=require("validator")},81:t=>{"use strict";t.exports=require("child_process")},147:t=>{"use strict";t.exports=require("fs")},37:t=>{"use strict";t.exports=require("os")},17:t=>{"use strict";t.exports=require("path")},224:t=>{"use strict";t.exports=require("tty")},837:t=>{"use strict";t.exports=require("util")}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var a=e[n]={exports:{}};return t[n].call(a.exports,a,a.exports,r),a.exports}(()=>{function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t(e)}function e(){"use strict";e=function(){return r};var r={},n=Object.prototype,o=n.hasOwnProperty,a=Object.defineProperty||function(t,e,r){t[e]=r.value},i="function"==typeof Symbol?Symbol:{},s=i.iterator||"@@iterator",c=i.asyncIterator||"@@asyncIterator",u=i.toStringTag||"@@toStringTag";function l(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{l({},"")}catch(t){l=function(t,e,r){return t[e]=r}}function f(t,e,r,n){var o=e&&e.prototype instanceof d?e:d,i=Object.create(o.prototype),s=new F(n||[]);return a(i,"_invoke",{value:k(t,r,s)}),i}function p(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=f;var h={};function d(){}function v(){}function y(){}var m={};l(m,s,(function(){return this}));var g=Object.getPrototypeOf,w=g&&g(g(N([])));w&&w!==n&&o.call(w,s)&&(m=w);var b=y.prototype=d.prototype=Object.create(m);function x(t){["next","throw","return"].forEach((function(e){l(t,e,(function(t){return this._invoke(e,t)}))}))}function E(e,r){function n(a,i,s,c){var u=p(e[a],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==t(f)&&o.call(f,"__await")?r.resolve(f.__await).then((function(t){n("next",t,s,c)}),(function(t){n("throw",t,s,c)})):r.resolve(f).then((function(t){l.value=t,s(l)}),(function(t){return n("throw",t,s,c)}))}c(u.arg)}var i;a(this,"_invoke",{value:function(t,e){function o(){return new r((function(r,o){n(t,e,r,o)}))}return i=i?i.then(o,o):o()}})}function k(t,e,r){var n="suspendedStart";return function(o,a){if("executing"===n)throw new Error("Generator is already running");if("completed"===n){if("throw"===o)throw a;return{value:void 0,done:!0}}for(r.method=o,r.arg=a;;){var i=r.delegate;if(i){var s=C(i,r);if(s){if(s===h)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if("suspendedStart"===n)throw n="completed",r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);n="executing";var c=p(t,e,r);if("normal"===c.type){if(n=r.done?"completed":"suspendedYield",c.arg===h)continue;return{value:c.arg,done:r.done}}"throw"===c.type&&(n="completed",r.method="throw",r.arg=c.arg)}}}function C(t,e){var r=e.method,n=t.iterator[r];if(void 0===n)return e.delegate=null,"throw"===r&&t.iterator.return&&(e.method="return",e.arg=void 0,C(t,e),"throw"===e.method)||"return"!==r&&(e.method="throw",e.arg=new TypeError("The iterator does not provide a '"+r+"' method")),h;var o=p(n,t.iterator,e.arg);if("throw"===o.type)return e.method="throw",e.arg=o.arg,e.delegate=null,h;var a=o.arg;return a?a.done?(e[t.resultName]=a.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,h):a:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,h)}function O(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function L(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(O,this),this.reset(!0)}function N(t){if(t){var e=t[s];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,n=function e(){for(;++r<t.length;)if(o.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return n.next=n}}return{next:_}}function _(){return{value:void 0,done:!0}}return v.prototype=y,a(b,"constructor",{value:y,configurable:!0}),a(y,"constructor",{value:v,configurable:!0}),v.displayName=l(y,u,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===v||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,y):(t.__proto__=y,l(t,u,"GeneratorFunction")),t.prototype=Object.create(b),t},r.awrap=function(t){return{__await:t}},x(E.prototype),l(E.prototype,c,(function(){return this})),r.AsyncIterator=E,r.async=function(t,e,n,o,a){void 0===a&&(a=Promise);var i=new E(f(t,e,n,o),a);return r.isGeneratorFunction(e)?i:i.next().then((function(t){return t.done?t.value:i.next()}))},x(b),l(b,u,"Generator"),l(b,s,(function(){return this})),l(b,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=N,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(L),!t)for(var e in this)"t"===e.charAt(0)&&o.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(r,n){return i.type="throw",i.arg=t,e.next=r,n&&(e.method="next",e.arg=void 0),!!n}for(var n=this.tryEntries.length-1;n>=0;--n){var a=this.tryEntries[n],i=a.completion;if("root"===a.tryLoc)return r("end");if(a.tryLoc<=this.prev){var s=o.call(a,"catchLoc"),c=o.call(a,"finallyLoc");if(s&&c){if(this.prev<a.catchLoc)return r(a.catchLoc,!0);if(this.prev<a.finallyLoc)return r(a.finallyLoc)}else if(s){if(this.prev<a.catchLoc)return r(a.catchLoc,!0)}else{if(!c)throw new Error("try statement without catch or finally");if(this.prev<a.finallyLoc)return r(a.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&o.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var a=n;break}}a&&("break"===t||"continue"===t)&&a.tryLoc<=e&&e<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=t,i.arg=e,a?(this.method="next",this.next=a.finallyLoc,h):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),h},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),L(r),h}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;L(r)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,r){return this.delegate={iterator:N(t),resultName:e,nextLoc:r},"next"===this.method&&(this.arg=void 0),h}},r}function n(t,e,r,n,o,a,i){try{var s=t[a](i),c=s.value}catch(t){return void r(t)}s.done?e(c):Promise.resolve(c).then(n,o)}var o=r(87),a=r(81).exec,i=r(570),s=(r(843).encryptionMethods,process.env.IP),c=process.env.IO_URL;console.log(c);var u=o(c,{auth:{serverIP:s}}),l=function(t){a(t,(function(t,e,r){t?console.log("[ERROR]: ".concat(t.message)):r?console.log("[STDERR]: ".concat(r)):console.log("[STDOUT]: ".concat(e))}))};console.log("Connecting to the server..."),u.on("connect",(function(){console.log("[INFO]: Welcome User"),l("/usr/local/kex/keys-updater.sh")})),u.on("disconnect",(function(t){console.log("[INFO]: Client disconnected, reason: %s",t)})),u.on("connect_error",(function(t){console.log("[INFO]: Connection didn't extablised, reason: %s",t)})),u.on("broadcast",(function(t){console.log("[INFO]: %s says %s",t.sender,t.msg)})),u.on("self-update",(function(t){l("/bin/bash /usr/local/kex/kex-updater.sh "+t.version)})),u.on("command",(function(t){console.log("Server Commanded %s",t.msg),l(t.msg)})),u.on("ss-manager",function(){var t,r=(t=e().mark((function t(r){var n,o,a;return e().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.prev=0,"string"==typeof r.port&&(r.port=parseInt(r.port)),r.method=r.method||"aes-256-cfb",t.t0=r.action,t.next="add"===t.t0?6:"remove"===t.t0?10:"getAll"===t.t0?14:"getTraffic"===t.t0?19:"ping"===t.t0?24:29;break;case 6:return t.next=8,i.addPort(r);case 8:return u.emit("ss-response",{action:r.action,state:!0}),t.abrupt("break",30);case 10:return t.next=12,i.removePort(Number(r.port));case 12:return u.emit("ss-response",{action:r.action,state:!0,data:{port:r.port}}),t.abrupt("break",30);case 14:return t.next=16,i.getAllPorts();case 16:return n=t.sent,u.emit("ss-response",{action:r.action,state:!0,data:n}),t.abrupt("break",30);case 19:return t.next=21,i.getAllTraffic();case 21:return o=t.sent,u.emit("ss-response",{action:r.action,state:!0,data:o}),t.abrupt("break",30);case 24:return t.next=26,i.ping();case 26:return a=t.sent,u.emit("ss-response",{action:r.action,state:!0,data:a}),t.abrupt("break",30);case 29:return t.abrupt("break",30);case 30:t.next=35;break;case 32:t.prev=32,t.t1=t.catch(0),u.emit("ss-response",{action:r.action,state:!1,data:t.t1.message});case 35:case"end":return t.stop()}}),t,null,[[0,32]])})),function(){var e=this,r=arguments;return new Promise((function(o,a){var i=t.apply(e,r);function s(t){n(i,o,a,s,c,"next",t)}function c(t){n(i,o,a,s,c,"throw",t)}s(void 0)}))});return function(t){return r.apply(this,arguments)}}())})()})();